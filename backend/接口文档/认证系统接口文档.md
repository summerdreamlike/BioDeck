# 多媒体教学平台 - 认证系统接口文档

## 目录

- [1. 用户登录](#1-用户登录)
- [2. 用户注册](#2-用户注册)
- [3. 刷新令牌](#3-刷新令牌)
- [4. 用户登出](#4-用户登出)
- [5. 学生注册（兼容接口）](#5-学生注册兼容接口)
- [6. 教师注册（兼容接口）](#6-教师注册兼容接口)

---

## 1. 用户登录

**接口地址**: `POST /auth/login`

**接口描述**: 用户登录获取访问令牌

**请求参数**:
```json
{
  "username": "用户名/学号/职工号",
  "password": "密码",
  "role": "用户角色(admin/teacher/student)"
}
```

**成功响应**:
```json
{
  "success": true,
  "message": "登录成功",
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "user": {
      "id": 1,
      "username": "admin",
      "role": "admin",
      "name": "管理员"
    }
  }
}
```

## 2. 用户注册

**接口地址**: `POST /auth/register`

**接口描述**: 注册新用户

**请求参数**:
```json
{
  "username": "用户名",
  "password": "密码",
  "role": "用户角色(admin/teacher/student)",
  "name": "真实姓名",
  "student_id": "学号(学生必填)",
  "class_id": "班级ID(学生必填)",
  "email": "邮箱地址(可选)"
}
```

## 3. 刷新令牌

**接口地址**: `POST /auth/refresh`

**接口描述**: 使用refresh_token刷新access_token

**请求参数**:
```json
{
  "refresh_token": "刷新令牌"
}
```

## 4. 用户登出

**接口地址**: `POST /auth/logout`

**接口描述**: 用户登出，使令牌失效

**请求头**: 需要携带Authorization

**成功响应**:
```json
{
  "success": true,
  "message": "登出成功"
}
```

## 5. 学生注册（兼容接口）

**接口地址**: `POST /auth/student/register`

**接口描述**: 学生注册（为向后兼容保留，内部调用统一注册接口）

**请求参数**: 同统一注册接口，role自动设置为student

## 6. 教师注册（兼容接口）

**接口地址**: `POST /auth/teacher/register`

**接口描述**: 教师注册（为向后兼容保留，内部调用统一注册接口）

**请求参数**: 同统一注册接口，role自动设置为teacher 