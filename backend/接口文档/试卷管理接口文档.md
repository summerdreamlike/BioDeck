# 多媒体教学平台 - 试卷管理接口文档

## 目录

- [1. 获取试卷列表](#1-获取试卷列表)
- [2. 获取试卷详情](#2-获取试卷详情)
- [3. 创建试卷](#3-创建试卷)
- [4. 更新试卷](#4-更新试卷)
- [5. 删除试卷](#5-删除试卷)
- [6. 学生答题](#6-学生答题)
- [7. 获取试卷成绩](#7-获取试卷成绩)
- [8. 获取学生试卷成绩](#8-获取学生试卷成绩)

---

## 1. 获取试卷列表

**接口地址**: `GET /papers`

**接口描述**: 获取试卷列表，支持分页和筛选

**权限要求**: 需要登录

**查询参数**:
- `page`: 页码（默认1）
- `page_size`: 每页大小（默认10）
- `creator_id`: 创建者ID
- `name`: 试卷名称搜索

**成功响应**:
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "items": [
      {
        "id": 1,
        "name": "期中考试",
        "description": "期中考试试卷",
        "creator_id": 1,
        "creator_name": "张老师",
        "total_questions": 10,
        "total_score": 100,
        "created_at": "2024-01-01T12:00:00Z"
      }
    ],
    "total": 50,
    "page": 1,
    "page_size": 10,
    "total_pages": 5
  }
}
```

## 2. 获取试卷详情

**接口地址**: `GET /papers/{paper_id}`

**接口描述**: 获取指定试卷的详细信息

**权限要求**: 需要登录

**路径参数**:
- `paper_id`: 试卷ID

**查询参数**:
- `include_questions`: 是否包含题目详情（默认true）

**成功响应**:
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "id": 1,
    "name": "期中考试",
    "description": "期中考试试卷",
    "creator_id": 1,
    "creator_name": "张老师",
    "total_questions": 10,
    "total_score": 100,
    "questions": [
      {
        "id": 1,
        "content": "题目内容",
        "type": "选择题",
        "score": 10
      }
    ],
    "created_at": "2024-01-01T12:00:00Z"
  }
}
```

## 3. 创建试卷

**接口地址**: `POST /papers`

**接口描述**: 创建新试卷

**权限要求**: admin、teacher

**请求参数**:
```json
{
  "name": "试卷名称",
  "description": "试卷描述",
  "question_ids": [1, 2, 3],
  "scores": [10, 15, 20]
}
```

**成功响应**:
```json
{
  "success": true,
  "message": "试卷创建成功",
  "data": {
    "id": 1,
    "name": "期中考试",
    "total_questions": 3,
    "total_score": 45
  }
}
```

## 4. 更新试卷

**接口地址**: `PUT /papers/{paper_id}`

**接口描述**: 更新试卷信息

**权限要求**: 试卷创建者或admin

**路径参数**:
- `paper_id`: 试卷ID

**请求参数**: 同创建试卷

## 5. 删除试卷

**接口地址**: `DELETE /papers/{paper_id}`

**接口描述**: 删除试卷

**权限要求**: 试卷创建者或admin

**路径参数**:
- `paper_id`: 试卷ID

## 6. 学生答题

**接口地址**: `POST /papers/{paper_id}/submit`

**接口描述**: 学生提交试卷答案

**权限要求**: student

**路径参数**:
- `paper_id`: 试卷ID

**请求参数**:
```json
{
  "answers": [
    {
      "question_id": 1,
      "answer": "A"
    },
    {
      "question_id": 2,
      "answer": "B"
    }
  ]
}
```

**成功响应**:
```json
{
  "success": true,
  "message": "试卷提交成功",
  "data": {
    "score": 85,
    "total_score": 100,
    "correct_count": 8,
    "total_questions": 10,
    "accuracy": 0.8
  }
}
```

## 7. 获取试卷成绩

**接口地址**: `GET /papers/{paper_id}/scores`

**接口描述**: 获取试卷的所有学生成绩

**权限要求**: admin、teacher

**路径参数**:
- `paper_id`: 试卷ID

**成功响应**:
```json
{
  "success": true,
  "message": "获取成功",
  "data": [
    {
      "student_id": 1,
      "student_name": "张三",
      "score": 85,
      "total_score": 100,
      "accuracy": 0.85,
      "submitted_at": "2024-01-01T12:00:00Z"
    }
  ]
}
```

## 8. 获取学生试卷成绩

**接口地址**: `GET /papers/{paper_id}/scores/{student_id}`

**接口描述**: 获取指定学生的试卷成绩详情

**权限要求**: 学生本人或admin、teacher

**路径参数**:
- `paper_id`: 试卷ID
- `student_id`: 学生ID

**成功响应**:
```json
{
  "success": true,
  "message": "获取成功",
  "data": {
    "student_id": 1,
    "score": 85,
    "total_score": 100,
    "accuracy": 0.85,
    "details": [
      {
        "question_id": 1,
        "is_correct": true,
        "student_answer": "A",
        "correct_answer": "A",
        "score": 10
      }
    ],
    "submitted_at": "2024-01-01T12:00:00Z"
  }
}
``` 